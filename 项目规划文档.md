# 校园贴吧系统 - 项目规划文档

## 项目概述

**项目名称**: 校园贴吧系统  
**项目类型**: Web应用  
**目标用户**: 在校学生、教职工  
**核心功能**: 帖子浏览、发布、评论、点赞、搜索、用户注册登录

## 功能需求分析

### 1. 用户管理模块
- 用户注册（邮箱/用户名验证）
- 用户登录/登出
- 用户信息管理（昵称、头像、个人简介）
- 密码修改/找回

### 2. 帖子管理模块
- 发布新帖子（标题、内容、图片上传）
- 浏览帖子列表（分页显示）
- 帖子详情查看
- 帖子编辑和删除（仅限作者）
- 帖子搜索（标题、内容关键词）

### 3. 互动功能模块
- 评论功能（对帖子进行评论）
- 点赞功能（对帖子和评论点赞）
- 回复功能（评论的回复）

### 4. 系统管理模块
- 帖子分类管理
- 用户权限管理
- 内容审核机制

## 技术栈选择

### 前端技术栈
- **框架**: React 18 + TypeScript
- **状态管理**: Redux Toolkit
- **路由**: React Router v6
- **UI组件库**: Ant Design
- **样式**: CSS Modules + Styled Components
- **构建工具**: Vite
- **HTTP客户端**: Axios

### 后端技术栈
- **运行时**: Node.js
- **框架**: Express.js
- **数据库**: MongoDB + Mongoose
- **认证**: JWT (JSON Web Tokens)
- **文件存储**: Multer (图片上传)
- **密码加密**: bcrypt
- **API文档**: Swagger/OpenAPI

### 开发工具
- **版本控制**: Git
- **包管理**: npm/yarn
- **代码规范**: ESLint + Prettier
- **测试**: Jest + React Testing Library

## 系统架构设计

### 前端架构
```
├── src/
│   ├── components/     # 可复用组件
│   ├── pages/         # 页面组件
│   ├── store/         # 状态管理
│   ├── services/      # API服务
│   ├── utils/         # 工具函数
│   ├── hooks/         # 自定义Hooks
│   ├── types/         # TypeScript类型定义
│   └── assets/        # 静态资源
```

### 后端架构
```
├── src/
│   ├── controllers/   # 控制器
│   ├── models/       # 数据模型
│   ├── routes/        # 路由定义
│   ├── middleware/    # 中间件
│   ├── services/      # 业务逻辑
│   ├── utils/         # 工具函数
│   └── config/        # 配置文件
```

## 数据库设计

### 用户表 (Users)
```javascript
{
  _id: ObjectId,
  username: String,     // 用户名
  email: String,        // 邮箱
  password: String,     // 加密密码
  nickname: String,     // 昵称
  avatar: String,       // 头像URL
  bio: String,          // 个人简介
  createdAt: Date,      // 创建时间
  updatedAt: Date       // 更新时间
}
```

### 帖子表 (Posts)
```javascript
{
  _id: ObjectId,
  title: String,        // 帖子标题
  content: String,      // 帖子内容
  author: ObjectId,     // 作者ID
  images: [String],     // 图片URL数组
  tags: [String],       // 标签
  likes: [ObjectId],    // 点赞用户ID数组
  comments: [ObjectId], // 评论ID数组
  viewCount: Number,    // 浏览数
  createdAt: Date,      // 创建时间
  updatedAt: Date       // 更新时间
}
```

### 评论表 (Comments)
```javascript
{
  _id: ObjectId,
  postId: ObjectId,     // 所属帖子ID
  author: ObjectId,     // 评论者ID
  content: String,      // 评论内容
  parentId: ObjectId,   // 父评论ID（用于回复）
  likes: [ObjectId],    // 点赞用户ID数组
  createdAt: Date       // 创建时间
}
```

## API接口设计

### 用户相关接口
- `POST /api/auth/register` - 用户注册
- `POST /api/auth/login` - 用户登录
- `GET /api/auth/me` - 获取当前用户信息
- `PUT /api/auth/profile` - 更新用户信息

### 帖子相关接口
- `GET /api/posts` - 获取帖子列表（支持分页和搜索）
- `POST /api/posts` - 创建新帖子
- `GET /api/posts/:id` - 获取帖子详情
- `PUT /api/posts/:id` - 更新帖子
- `DELETE /api/posts/:id` - 删除帖子
- `POST /api/posts/:id/like` - 点赞/取消点赞

### 评论相关接口
- `GET /api/posts/:id/comments` - 获取帖子评论
- `POST /api/posts/:id/comments` - 添加评论
- `DELETE /api/comments/:id` - 删除评论
- `POST /api/comments/:id/like` - 点赞评论

## 开发计划

### 第一阶段：基础架构搭建（1周）
- 项目初始化
- 前后端基础框架搭建
- 数据库设计
- 基础组件开发

### 第二阶段：核心功能实现（2周）
- 用户认证系统
- 帖子管理功能
- 评论系统
- 点赞功能

### 第三阶段：界面优化和测试（1周）
- UI界面完善
- 功能测试
- 性能优化
- 部署准备

## 风险评估

### 技术风险
- 前后端数据同步问题
- 图片上传和存储性能
- 并发访问处理

### 应对措施
- 使用TypeScript增强类型安全
- 实施代码审查和单元测试
- 采用CDN加速静态资源

## 成功标准

- 系统稳定运行，无重大bug
- 用户界面友好，操作流畅
- 支持至少1000个并发用户
- 响应时间在2秒以内
- 代码质量高，可维护性强

---

*文档版本: v1.0*  
*创建日期: 2024年*  
*最后更新: 2024年*