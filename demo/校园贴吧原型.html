<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>校园贴吧 - 发布帖子</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/create-post.css">
</head>
<body>
    <!-- 导航栏 -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-brand">
                <h1>校园贴吧</h1>
            </div>
            <div class="nav-search">
                <input type="text" placeholder="搜索帖子、用户..." class="search-input">
                <button class="search-btn">搜索</button>
            </div>
            <div class="nav-menu">
                <a href="index.html" class="nav-link">首页</a>
                <a href="post-detail.html" class="nav-link">帖子</a>
                <a href="create-post.html" class="nav-link active">发帖</a>
                <a href="profile.html" class="nav-link">我的</a>
                <a href="login.html" class="nav-link">登录</a>
            </div>
        </div>
    </nav>

    <!-- 主要内容区域 -->
    <main class="main-content">
        <div class="container">
            <div class="create-post-container">
                <!-- 页面标题 -->
                <div class="page-header">
                    <h1>发布新帖子</h1>
                    <p>分享你的想法、问题或经验</p>
                </div>

                <!-- 发帖表单 -->
                <form class="post-form" id="postForm">
                    <!-- 帖子标题 -->
                    <div class="form-group">
                        <label for="postTitle" class="form-label">帖子标题 *</label>
                        <input 
                            type="text" 
                            id="postTitle" 
                            class="form-input" 
                            placeholder="请输入帖子标题（2-50个字符）"
                            maxlength="50"
                            required
                        >
                        <div class="char-count">
                            <span id="titleCount">0</span>/50
                        </div>
                    </div>

                    <!-- 帖子内容 -->
                    <div class="form-group">
                        <label for="postContent" class="form-label">帖子内容 *</label>
                        <div class="editor-toolbar">
                            <button type="button" class="toolbar-btn" onclick="formatText('bold')" title="粗体">
                                <strong>B</strong>
                            </button>
                            <button type="button" class="toolbar-btn" onclick="formatText('italic')" title="斜体">
                                <em>I</em>
                            </button>
                            <button type="button" class="toolbar-btn" onclick="formatText('underline')" title="下划线">
                                <u>U</u>
                            </button>
                            <button type="button" class="toolbar-btn" onclick="insertLink()" title="插入链接">
                                🔗
                            </button>
                            <button type="button" class="toolbar-btn" onclick="insertImage()" title="插入图片">
                                🖼️
                            </button>
                            <button type="button" class="toolbar-btn" onclick="insertCode()" title="插入代码">
                                &lt;/&gt;
                            </button>
                        </div>
                        <textarea 
                            id="postContent" 
                            class="form-textarea editor-content" 
                            placeholder="请输入帖子内容...（支持Markdown语法）"
                            rows="12"
                            maxlength="2000"
                            required
                        ></textarea>
                        <div class="char-count">
                            <span id="contentCount">0</span>/2000
                        </div>
                    </div>

                    <!-- 帖子分类 -->
                    <div class="form-group">
                        <label for="postCategory" class="form-label">选择分类 *</label>
                        <select id="postCategory" class="form-input" required>
                            <option value="">请选择帖子分类</option>
                            <option value="campus-news">校园新闻</option>
                            <option value="study-exchange">学习交流</option>
                            <option value="life-service">生活服务</option>
                            <option value="second-hand">二手交易</option>
                            <option value="club-activity">社团活动</option>
                            <option value="entertainment">娱乐休闲</option>
                            <option value="question">问题求助</option>
                            <option value="other">其他</option>
                        </select>
                    </div>

                    <!-- 标签设置 -->
                    <div class="form-group">
                        <label class="form-label">帖子标签</label>
                        <div class="tags-input-container">
                            <input 
                                type="text" 
                                id="tagInput" 
                                class="tag-input" 
                                placeholder="输入标签后按回车添加（最多5个标签）"
                                maxlength="10"
                            >
                            <div class="tags-list" id="tagsList">
                                <!-- 标签将动态添加到这里 -->
                            </div>
                        </div>
                        <div class="tags-suggestions">
                            <span class="suggestion-title">常用标签：</span>
                            <div class="suggestion-tags">
                                <span class="suggestion-tag" onclick="addSuggestedTag('学习资料')">学习资料</span>
                                <span class="suggestion-tag" onclick="addSuggestedTag('考试经验')">考试经验</span>
                                <span class="suggestion-tag" onclick="addSuggestedTag('校园活动')">校园活动</span>
                                <span class="suggestion-tag" onclick="addSuggestedTag('求职实习')">求职实习</span>
                                <span class="suggestion-tag" onclick="addSuggestedTag('生活技巧')">生活技巧</span>
                            </div>
                        </div>
                    </div>

                    <!-- 附件上传 -->
                    <div class="form-group">
                        <label class="form-label">附件上传</label>
                        <div class="upload-area" id="uploadArea">
                            <div class="upload-placeholder">
                                <span class="upload-icon">📎</span>
                                <p>点击或拖拽文件到此处上传</p>
                                <p class="upload-hint">支持图片、文档等文件，单个文件不超过10MB</p>
                            </div>
                            <input 
                                type="file" 
                                id="fileInput" 
                                multiple 
                                accept="image/*,.pdf,.doc,.docx,.txt" 
                                style="display: none;"
                            >
                        </div>
                        <div class="file-list" id="fileList">
                            <!-- 文件列表将动态添加到这里 -->
                        </div>
                    </div>

                    <!-- 发布设置 -->
                    <div class="form-group">
                        <label class="form-label">发布设置</label>
                        <div class="publish-settings">
                            <label class="setting-option">
                                <input type="checkbox" id="allowComments" checked>
                                <span class="checkmark"></span>
                                允许评论
                            </label>
                            <label class="setting-option">
                                <input type="checkbox" id="anonymousPost">
                                <span class="checkmark"></span>
                                匿名发布
                            </label>
                            <label class="setting-option">
                                <input type="checkbox" id="stickyPost">
                                <span class="checkmark"></span>
                                置顶帖子（需要权限）
                            </label>
                        </div>
                    </div>

                    <!-- 表单操作按钮 -->
                    <div class="form-actions">
                        <button type="button" class="btn btn-secondary" onclick="saveDraft()">
                            💾 保存草稿
                        </button>
                        <button type="button" class="btn btn-secondary" onclick="previewPost()">
                            👁️ 预览
                        </button>
                        <button type="submit" class="btn btn-primary">
                            📤 发布帖子
                        </button>
                    </div>
                </form>

                <!-- 预览区域 -->
                <div class="preview-container" id="previewContainer" style="display: none;">
                    <div class="preview-header">
                        <h3>帖子预览</h3>
                        <button type="button" class="btn btn-secondary" onclick="hidePreview()">
                            ✕ 关闭预览
                        </button>
                    </div>
                    <div class="preview-content" id="previewContent">
                        <!-- 预览内容将动态生成 -->
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- 页脚 -->
    <footer class="footer">
        <div class="container">
            <p>&copy; 2024 校园贴吧系统. 保留所有权利.</p>
        </div>
    </footer>

    <script src="js/main.js"></script>
    <script src="js/create-post.js"></script>
</body>
</html>